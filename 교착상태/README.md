# **교착상태**

**교착 상태**란 두 개 이상의 작업이 서로 상대방의 작업이 끝나기 만을 기다리고 있기 때문에 결과적으로 아무것도 완료되지 못하는 상태를 말한다. 

![](.\images\dead.jpg)



## 교착 상태 조건

- 점유대기
  - 프로세스가 할당된 자원을 가진 상태에서 다른 자원을 기다린다.
- 비선점
  - 프로세스가 어떤 자원의 사용을 끝낼 때까지 그 자원을 뺏을 수 없다.
- 순환대기
  - 각 프로세스는 순환적으로 다음 프로세스가 요구하는 자원을 가지고 있다.

위의 3가지 조건 중에서 한 가지라도 만족하지 않으면 교착 상태는 발생하지 않는다. 순환대기 조건은 점유대기 조건과 비선점 조건을 만족해야 성립하는 조건이므로 서로 완전히 독립적인 것은 안니다.



## 교착 상태의 관리

대부분의 운영체제들은 교착 상태를 막는 것은 불가능하며 제각기 다른 비 표준 방식들로 이러한 교착 상태에 대응한다. 대부분은 4가지 코프먼 조건을 가운데 하나를 막음으로써 동작한다.



### 교착 상태의 예방

- 상호배제 조건의 제거
  - 교착 상태는 두 개 이상의 프로세스가 공유가능한 자원을 사용할 때 발생하는 것이므로 공유 불가능한, 즉 상호 배제 조건을 제거하면 교착 상태를 해결할 수 있다.
- 점유와 대기 조건의 제거
  - 한 프로세스에 수행되기 전에 모든 자원을 할당시키고 나서 점유하지 않을 때에는 다른 프로세스가 자원을 요구하도록 하는 방법이다. 자원 과다 사용으로 인한 효율성, 프로세스가 요구하는 자원을 파악하는 데에 대한 비용, 자원에 대한 내용을 저장 및 복원하기 위한 비용, 기아 상태, 무한대기 등의 문제점이 있다.

- 비선점 조건의 제거
  - 비선점 프로세스에 대해 선점 가능한 프로토콜을 만들어 준다.

- 환형 대기 조건의 제거
  - 자원 유형에 따라 순서를 매긴다.

이 교착 상태의 해결 방법들은 자원 사용의 효율성이 떨어지고 비용이 많이 드는 문제점이 있다.



### 교착 상태의 회피

자원이 어떻게 요청될지에 대한 추가정보를 제공하도록 요구하는 것으로 시스템에 circular wait가 발생하지 않도록 자원 할당 상태를 검사한다.

교착 상태 회피하기 위한 알고리즘으로 크게 두가지가 있다.

- 자원 할당 그래프 알고리즘
- 은행원 알고리즘



### 교착 상태의 무시

예방 혹은 회피기법을 프로그래밍해서 넣으면 성능에 큰 영향을 미칠 수 있게 된다. 그렇기 때문에 데드락의 발생 확률이 비교적 낮은 경우 별다른 조치를 취하지 않는다.



### 교착 상태의 회복

교착 상태 발생 이후에 대한 문제를 해결하는 방법이다. 교착 상태가 발생할 경우 프로세스를 종료하거나 ,할당된 자원을 해제함으로써 유지 상태로 복구 시키는 것이다.



#### 프로세스 종료

- 교착 상태의 프로세스 모두 중지
- 교착 상태가 제거될 때까지 한 프로세스씩 중지



#### 자원 선점

- 교착 상태의 프로세스가 점유하고 있는 자원을 선점하여 다른 프로세스에 할당하며, 해당 프로세스를 일시 정지 시킴
- 우선 순위가 낮은 프로세스, 수행된 횟수가 적은 프로세스 등을 위주로 프로세스의 자원을 선점





## 참고

- [https://ko.wikipedia.org/wiki/교착_상태](https://ko.wikipedia.org/wiki/교착_상태)

